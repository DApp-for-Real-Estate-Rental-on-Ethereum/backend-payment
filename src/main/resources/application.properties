# Application Name
spring.application.name=payments-svc
spring.profiles.active=local
server.port=8085

# ==================== PostgreSQL Datasource ====================
spring.datasource.url=jdbc:postgresql://localhost:5432/lotfi?sslmode=disable
spring.datasource.username=postgres
spring.datasource.password=12345
spring.datasource.driver-class-name=org.postgresql.Driver

# ==================== JPA/Hibernate ====================
# Use 'update' to update existing tables (recommended)
# Use 'create' to recreate tables (WARNING: deletes all data!)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# ==================== Flyway ====================
# Disabled to avoid altering existing DB
spring.flyway.enabled=false

# ==================== Security ====================
# Local - permissive (disabled for development)
app.security.enabled=false

# ==================== Schedulers ====================
# Disable schedulers (no on-chain polling in local profile)
spring.task.scheduling.enabled=false

# ==================== RabbitMQ Configuration ====================
spring.rabbitmq.host=rabbitmq-service
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# ==================== Actuator ====================
management.endpoints.web.exposure.include=health,metrics,prometheus
management.endpoint.health.show-details=when-authorized

# ==================== OpenAPI/Swagger ====================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# ==================== Logging ====================
logging.level.root=INFO
logging.level.ma.fstt.paymentservice=DEBUG

# ==================== Blockchain Configuration ====================
app.web3.chain-id=31337
app.web3.rpc-url=http://127.0.0.1:8545
# Contract address - Updated after deployment
# Deployed at: 2024 (run: npm run deploy:booking-payment:local)
app.web3.contract-address=0x322813Fd9A801c5507c9de605d63CEA4f2CE6c44
# Private key for sending transactions (required for completeBooking function)
# This should be the private key of the admin account (0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266)
# Hardhat default account #0 private key (for localhost only - NEVER use in production!)
app.web3.private-key=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

# ==================== Property Service Configuration ====================
app.property-service.url=http://property-service:8081

# ==================== Booking Service Configuration ====================
app.booking-service.url=http://booking-service:8083

management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always
management.metrics.tags.application=${spring.application.name}
